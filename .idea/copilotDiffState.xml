<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/humancore-api/src/main/java/com/humanconsulting/humancore_api/infrastructure/configs/UsuarioConfig.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/humancore-api/src/main/java/com/humanconsulting/humancore_api/infrastructure/configs/UsuarioConfig.java" />
              <option name="originalContent" value="&#10;" />
              <option name="updatedContent" value="package com.humanconsulting.humancore_api.infrastructure.configs;&#10;&#10;import com.humanconsulting.humancore_api.application.usecases.usuario.*;&#10;import com.humanconsulting.humancore_api.domain.repositories.UsuarioRepository;&#10;import com.humanconsulting.humancore_api.domain.repositories.EmpresaRepository;&#10;import com.humanconsulting.humancore_api.domain.notifiers.EmailNotifier;&#10;import com.humanconsulting.humancore_api.application.usecases.usuario.mappers.UsuarioResponseMapper;&#10;import org.springframework.context.annotation.Bean;&#10;import org.springframework.context.annotation.Configuration;&#10;&#10;@Configuration&#10;public class UsuarioConfig {&#10;    @Bean&#10;    public CadastrarUsuarioUseCase cadastrarUsuarioUseCase(&#10;            UsuarioRepository usuarioRepository,&#10;            EmpresaRepository empresaRepository,&#10;            UsuarioResponseMapper usuarioResponseMapper&#10;    ) {&#10;        return new CadastrarUsuarioUseCase(&#10;                usuarioRepository,&#10;                empresaRepository,&#10;                usuarioResponseMapper&#10;        );&#10;    }&#10;&#10;    @Bean&#10;    public AtualizarCoresPorIdUseCase atualizarCoresPorIdUseCase(UsuarioRepository usuarioRepository) {&#10;        return new AtualizarCoresPorIdUseCase(usuarioRepository);&#10;    }&#10;&#10;    @Bean&#10;    public AtualizarSenhaUseCase atualizarSenhaUseCase(UsuarioRepository usuarioRepository) {&#10;        return new AtualizarSenhaUseCase(usuarioRepository);&#10;    }&#10;&#10;    @Bean&#10;    public AtualizarUsuarioUseCase atualizarUsuarioUseCase(UsuarioRepository usuarioRepository, EmpresaRepository empresaRepository) {&#10;        return new AtualizarUsuarioUseCase(usuarioRepository, empresaRepository);&#10;    }&#10;&#10;    @Bean&#10;    public AutenticarUsuarioUseCase autenticarUsuarioUseCase(UsuarioRepository usuarioRepository) {&#10;        return new AutenticarUsuarioUseCase(usuarioRepository);&#10;    }&#10;&#10;    @Bean&#10;    public BuscarUsuarioPorEmailUseCase buscarUsuarioPorEmailUseCase(UsuarioRepository usuarioRepository) {&#10;        return new BuscarUsuarioPorEmailUseCase(usuarioRepository);&#10;    }&#10;&#10;    @Bean&#10;    public BuscarUsuarioPorIdUseCase buscarUsuarioPorIdUseCase(UsuarioRepository usuarioRepository) {&#10;        return new BuscarUsuarioPorIdUseCase(usuarioRepository);&#10;    }&#10;&#10;    @Bean&#10;    public DeletarUsuarioUseCase deletarUsuarioUseCase(UsuarioRepository usuarioRepository) {&#10;        return new DeletarUsuarioUseCase(usuarioRepository);&#10;    }&#10;&#10;    @Bean&#10;    public EnviarCodigoUseCase enviarCodigoUseCase(EmailNotifier emailNotifier) {&#10;        return new EnviarCodigoUseCase(emailNotifier);&#10;    }&#10;&#10;    @Bean&#10;    public ListarUsuariosPorEmpresaUseCase listarUsuariosPorEmpresaUseCase(UsuarioRepository usuarioRepository, EmpresaRepository empresaRepository) {&#10;        return new ListarUsuariosPorEmpresaUseCase(usuarioRepository, empresaRepository);&#10;    }&#10;&#10;    @Bean&#10;    public ListarUsuariosUseCase listarUsuariosUseCase(UsuarioRepository usuarioRepository) {&#10;        return new ListarUsuariosUseCase(usuarioRepository);&#10;    }&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/humancore-api/src/main/java/com/humanconsulting/humancore_api/novo/application/usecases/usuario/BuscarPorIdUseCase.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/humancore-api/src/main/java/com/humanconsulting/humancore_api/novo/application/usecases/usuario/BuscarPorIdUseCase.java" />
              <option name="originalContent" value="&#10;&#10;    public BuscarPorIdUseCase(UsuarioRepository usuarioRepository) {&#10;        this.usuarioRepository = usuarioRepository;&#10;    }&#10;&#10;" />
              <option name="updatedContent" value="package com.humanconsulting.humancore_api.novo.application.usecases.usuario;&#13;&#10;&#13;&#10;import com.humanconsulting.humancore_api.novo.domain.entities.Usuario;&#13;&#10;import com.humanconsulting.humancore_api.novo.domain.repositories.UsuarioRepository;&#13;&#10;import com.humanconsulting.humancore_api.velho.exception.EntidadeNaoEncontradaException;&#13;&#10;import com.humanconsulting.humancore_api.novo.application.usecases.usuario.mappers.UsuarioMapper;&#13;&#10;import com.humanconsulting.humancore_api.novo.application.usecases.usuario.dto.LoginResponseDto;&#13;&#10;&#13;&#10;public class BuscarPorIdUseCase {&#13;&#10;    private final UsuarioRepository usuarioRepository;&#13;&#10;    private final UsuarioMapper usuarioMapper;&#13;&#10;&#13;&#10;    public BuscarPorIdUseCase(UsuarioRepository usuarioRepository, UsuarioMapper usuarioMapper) {&#13;&#10;        this.usuarioRepository = usuarioRepository;&#13;&#10;        this.usuarioMapper = usuarioMapper;&#13;&#10;    }&#13;&#10;&#13;&#10;    public LoginResponseDto execute(Integer id) {&#13;&#10;        Usuario usuario = usuarioRepository.findById(id);&#13;&#10;        if (usuario == null) throw new EntidadeNaoEncontradaException(&quot;Usuário não encontrado.&quot;);&#13;&#10;        return usuarioMapper.toLoginResponse(usuario, null);&#13;&#10;    }&#13;&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/humancore-api/src/main/java/com/humanconsulting/humancore_api/novo/application/usecases/usuario/CadastrarUseCase.java">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/humancore-api/src/main/java/com/humanconsulting/humancore_api/novo/application/usecases/usuario/CadastrarUseCase.java" />
              <option name="originalContent" value="&#10;&#10;    public CadastrarUseCase(&#10;        UsuarioRepository usuarioRepository,&#10;        EmpresaRepository empresaRepository,&#10;        PasswordEncoder passwordEncoder,&#10;        EmailNotifier emailNotifier,&#10;        SalaNotifier salaNotifier&#10;    ) {&#10;        this.usuarioRepository = usuarioRepository;&#10;        this.empresaRepository = empresaRepository;&#10;" />
              <option name="updatedContent" value="package com.humanconsulting.humancore_api.novo.application.usecases.usuario;&#13;&#10;&#13;&#10;import com.humanconsulting.humancore_api.novo.domain.entities.Usuario;&#13;&#10;import com.humanconsulting.humancore_api.novo.domain.entities.Empresa;&#13;&#10;import com.humanconsulting.humancore_api.novo.domain.repositories.UsuarioRepository;&#13;&#10;import com.humanconsulting.humancore_api.novo.domain.repositories.EmpresaRepository;&#13;&#10;import com.humanconsulting.humancore_api.velho.exception.EntidadeConflitanteException;&#13;&#10;&#13;&#10;public class CadastrarUseCase {&#13;&#10;    private final UsuarioRepository usuarioRepository;&#13;&#10;    private final EmpresaRepository empresaRepository;&#13;&#10;    private final PasswordEncoder passwordEncoder;&#13;&#10;    private final EmailNotifier emailNotifier;&#13;&#10;    private final SalaNotifier salaNotifier;&#13;&#10;&#13;&#10;    public CadastrarUseCase(&#13;&#10;        UsuarioRepository usuarioRepository,&#13;&#10;        EmpresaRepository empresaRepository,&#13;&#10;        PasswordEncoder passwordEncoder,&#13;&#10;        EmailNotifier emailNotifier,&#13;&#10;        SalaNotifier salaNotifier&#13;&#10;    ) {&#13;&#10;        this.usuarioRepository = usuarioRepository;&#13;&#10;        this.empresaRepository = empresaRepository;&#13;&#10;        this.passwordEncoder = passwordEncoder;&#13;&#10;        this.emailNotifier = emailNotifier;&#13;&#10;        this.salaNotifier = salaNotifier;&#13;&#10;    }&#13;&#10;&#13;&#10;    public Usuario execute(Usuario novoUsuario, Integer fkEmpresa) {&#13;&#10;        if (usuarioRepository.findByEmail(novoUsuario.getEmail()) == null) {&#13;&#10;            novoUsuario.setCores(&quot;#606080|#8d7dca|#4e5e8c|true&quot;);&#13;&#10;            Empresa empresa = empresaRepository.findById(fkEmpresa);&#13;&#10;            novoUsuario.setEmpresa(empresa);&#13;&#10;            String senhaCriptografada = passwordEncoder.encode(novoUsuario.getSenha());&#13;&#10;            try {&#13;&#10;                emailNotifier.cadastro(novoUsuario);&#13;&#10;            } catch (Exception exception) {&#13;&#10;                throw new RuntimeException(&quot;Não foi possível cadastrar o usuário.&quot;);&#13;&#10;            }&#13;&#10;            novoUsuario.setSenha(senhaCriptografada);&#13;&#10;            Usuario usuarioCadastrado = usuarioRepository.save(novoUsuario);&#13;&#10;            salaNotifier.adicionarUsuarioEmSalaEmpresa(usuarioCadastrado);&#13;&#10;            return usuarioCadastrado;&#13;&#10;        }&#13;&#10;        throw new EntidadeConflitanteException(&quot;Este email já foi registrado&quot;);&#13;&#10;    }&#13;&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>